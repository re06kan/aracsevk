{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { of } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./auth.service\";\nclass VehicleService {\n  constructor(http, authService) {\n    this.http = http;\n    this.authService = authService;\n    this.apiUrl = environment.apiUrl + '/vehicles';\n  }\n  getHeaders() {\n    const token = this.authService.getToken();\n    return new HttpHeaders({\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    });\n  }\n  getVehicles() {\n    return this.http.get(this.apiUrl, {\n      headers: this.getHeaders()\n    }).pipe(map(vehicles => vehicles.map(vehicle => ({\n      plate: vehicle.plate,\n      model: vehicle.model,\n      status: vehicle.status === 'hazır' ? 'hazır' : vehicle.status === 'görevde' ? 'görevde' : 'kademede'\n    }))), catchError(error => {\n      console.error('Vehicle fetch error:', error);\n      // Mock veriler\n      return of([{\n        plate: '34ABC123',\n        model: 'Mercedes Sprinter',\n        status: 'hazır'\n      }, {\n        plate: '34XYZ789',\n        model: 'Ford Transit',\n        status: 'görevde'\n      }]);\n    }));\n  }\n  getVehicleStats() {\n    return this.http.get(this.apiUrl + '/stats', {\n      headers: this.getHeaders()\n    }).pipe(catchError(error => {\n      console.error('Vehicle stats error:', error);\n      // Mock istatistikler\n      return of({\n        total: 2,\n        ready: 1,\n        onDuty: 1,\n        longRoute: 0,\n        standby: 0\n      });\n    }));\n  }\n  static {\n    this.ɵfac = function VehicleService_Factory(t) {\n      return new (t || VehicleService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.AuthService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: VehicleService,\n      factory: VehicleService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}\nexport { VehicleService };","map":{"version":3,"names":["HttpHeaders","of","catchError","map","environment","VehicleService","constructor","http","authService","apiUrl","getHeaders","token","getToken","getVehicles","get","headers","pipe","vehicles","vehicle","plate","model","status","error","console","getVehicleStats","total","ready","onDuty","longRoute","standby","i0","ɵɵinject","i1","HttpClient","i2","AuthService","factory","ɵfac","providedIn"],"sources":["C:\\work\\aracsevk\\frontend\\src\\app\\services\\vehicle.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\nimport { Vehicle } from '../models/vehicle.model';\nimport { AuthService } from './auth.service';\n\nexport interface VehicleStats {\n  total: number;\n  ready: number;\n  onDuty: number;\n  longRoute: number;\n  standby: number;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class VehicleService {\n  private apiUrl = environment.apiUrl + '/vehicles';\n\n  constructor(\n    private http: HttpClient,\n    private authService: AuthService\n  ) {}\n\n  private getHeaders(): HttpHeaders {\n    const token = this.authService.getToken();\n    return new HttpHeaders({\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    });\n  }\n\n  getVehicles(): Observable<Vehicle[]> {\n    return this.http.get<any[]>(this.apiUrl, { \n      headers: this.getHeaders() \n    }).pipe(\n      map(vehicles => vehicles.map(vehicle => ({\n        plate: vehicle.plate,\n        model: vehicle.model,\n        status: vehicle.status === 'hazır' ? 'hazır' :\n                vehicle.status === 'görevde' ? 'görevde' :\n                'kademede'\n      }))),\n      catchError(error => {\n        console.error('Vehicle fetch error:', error);\n        // Mock veriler\n        return of([\n          { plate: '34ABC123', model: 'Mercedes Sprinter', status: 'hazır' },\n          { plate: '34XYZ789', model: 'Ford Transit', status: 'görevde' }\n        ] as Vehicle[]);\n      })\n    );\n  }\n\n  getVehicleStats(): Observable<VehicleStats> {\n    return this.http.get<VehicleStats>(this.apiUrl + '/stats', { \n      headers: this.getHeaders() \n    }).pipe(\n      catchError(error => {\n        console.error('Vehicle stats error:', error);\n        // Mock istatistikler\n        return of({\n          total: 2,\n          ready: 1,\n          onDuty: 1,\n          longRoute: 0,\n          standby: 0\n        });\n      })\n    );\n  }\n}\n"],"mappings":"AACA,SAAqBA,WAAW,QAAQ,sBAAsB;AAC9D,SAAqBC,EAAE,QAAQ,MAAM;AACrC,SAASC,UAAU,EAAEC,GAAG,QAAQ,gBAAgB;AAChD,SAASC,WAAW,QAAQ,gCAAgC;;;;AAY5D,MAGaC,cAAc;EAGzBC,YACUC,IAAgB,EAChBC,WAAwB;IADxB,KAAAD,IAAI,GAAJA,IAAI;IACJ,KAAAC,WAAW,GAAXA,WAAW;IAJb,KAAAC,MAAM,GAAGL,WAAW,CAACK,MAAM,GAAG,WAAW;EAK9C;EAEKC,UAAUA,CAAA;IAChB,MAAMC,KAAK,GAAG,IAAI,CAACH,WAAW,CAACI,QAAQ,EAAE;IACzC,OAAO,IAAIZ,WAAW,CAAC;MACrB,cAAc,EAAE,kBAAkB;MAClC,eAAe,EAAE,UAAUW,KAAK;KACjC,CAAC;EACJ;EAEAE,WAAWA,CAAA;IACT,OAAO,IAAI,CAACN,IAAI,CAACO,GAAG,CAAQ,IAAI,CAACL,MAAM,EAAE;MACvCM,OAAO,EAAE,IAAI,CAACL,UAAU;KACzB,CAAC,CAACM,IAAI,CACLb,GAAG,CAACc,QAAQ,IAAIA,QAAQ,CAACd,GAAG,CAACe,OAAO,KAAK;MACvCC,KAAK,EAAED,OAAO,CAACC,KAAK;MACpBC,KAAK,EAAEF,OAAO,CAACE,KAAK;MACpBC,MAAM,EAAEH,OAAO,CAACG,MAAM,KAAK,OAAO,GAAG,OAAO,GACpCH,OAAO,CAACG,MAAM,KAAK,SAAS,GAAG,SAAS,GACxC;KACT,CAAC,CAAC,CAAC,EACJnB,UAAU,CAACoB,KAAK,IAAG;MACjBC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5C;MACA,OAAOrB,EAAE,CAAC,CACR;QAAEkB,KAAK,EAAE,UAAU;QAAEC,KAAK,EAAE,mBAAmB;QAAEC,MAAM,EAAE;MAAO,CAAE,EAClE;QAAEF,KAAK,EAAE,UAAU;QAAEC,KAAK,EAAE,cAAc;QAAEC,MAAM,EAAE;MAAS,CAAE,CACnD,CAAC;IACjB,CAAC,CAAC,CACH;EACH;EAEAG,eAAeA,CAAA;IACb,OAAO,IAAI,CAACjB,IAAI,CAACO,GAAG,CAAe,IAAI,CAACL,MAAM,GAAG,QAAQ,EAAE;MACzDM,OAAO,EAAE,IAAI,CAACL,UAAU;KACzB,CAAC,CAACM,IAAI,CACLd,UAAU,CAACoB,KAAK,IAAG;MACjBC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5C;MACA,OAAOrB,EAAE,CAAC;QACRwB,KAAK,EAAE,CAAC;QACRC,KAAK,EAAE,CAAC;QACRC,MAAM,EAAE,CAAC;QACTC,SAAS,EAAE,CAAC;QACZC,OAAO,EAAE;OACV,CAAC;IACJ,CAAC,CAAC,CACH;EACH;;;uBAtDWxB,cAAc,EAAAyB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,WAAA;IAAA;EAAA;;;aAAd9B,cAAc;MAAA+B,OAAA,EAAd/B,cAAc,CAAAgC,IAAA;MAAAC,UAAA,EAFb;IAAM;EAAA;;SAEPjC,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}